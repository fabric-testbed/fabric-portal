<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>FABRIC Portal</title>
    <script type="application/javascript">
        function getHeaders(callback) {
            let req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState === XMLHttpRequest.DONE) {
                    if (callback && typeof callback === 'function') {
                        callback(req.getAllResponseHeaders());
                    }
                }
            };
            req.open('HEAD', document.location, false);
            req.send(null);

            let data = {};
            // get all headers in one call and parse each item
            let headers = req.getAllResponseHeaders();
            let aHeaders = headers.split('\n');
            for (let i = 0; i < aHeaders.length; i++) {
                let thisItem = aHeaders[i];
                let key = thisItem.substring(0, thisItem.indexOf(':'));
                data[key] = thisItem.substring(thisItem.indexOf(':') + 1);
            }

            if (data["cookie"] && data["cookie"].substring(0, 10).includes("fabric")) {
              // store the auth cookie in browser.
              localStorage.setItem("token", data["cookie"]);
            }
        }
    </script>
  </head>

<body onload="getHeaders();">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>
